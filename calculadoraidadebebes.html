<!DOCTYPE html>
<html>
<head>
    <title>Calculadora Idade Correta de Bebês Prematuros</title>
</head>
<body>
    <div class="container">
        <div class="blurb">
            <h1>Calculadora Idade Correta de Bebês Prematuros</h1>
            <form id="calculadora">
                <label for="dataNascimento">Data de Nascimento:</label>
                <input type="date" id="dataNascimento" name="dataNascimento">
                <label for="semanasGestacao">Semanas de Gestação:</label>
                <input type="number" id="semanasGestacao" name="semanasGestacao" min="20" max="40">
                <button type="button" onclick="calcularIdade()">Calcular</button>
            </form>
            <p id="resultado"></p>
        </div>
    </div>
    <script>
        function calcularIdade() {
            const dataNascimento = new Date(document.getElementById('dataNascimento').value);
            const semanasGestacao = parseInt(document.getElementById('semanasGestacao').value);
            const hoje = new Date();
            const diff = hoje - dataNascimento;
            const diffInDays = Math.trunc(diff / (1000 * 60 * 60 * 24));

            let resultText = '';
            const ano = diffInDays/365;
            if(ano>4){
                const semanas = ((diffInDays%365)-(ano/4))/7;
                const dias = ((diffInDays%365)-(ano/4))%7;
            }
            else {
                semanas =((diffInDays % 365) / 7);
                dias = (diffInDays % 365) % 7;
            }
            if(semanasGestacao < 37) {
                resultText  = ano + " anos, " + semanas-(40-semanasGestacao) + " semanas, e "  + dias + " dias";
            }
            else{
                resultText  = ano + " anos, " + semanas + " semanas, e "  + dias + " dias";
            }

            document.getElementById('resultado').innerText = resultText;
        }
    </script>
</body>
</html>
